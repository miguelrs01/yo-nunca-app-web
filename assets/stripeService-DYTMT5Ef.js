import{g as S}from"./index-CUk8tap_.js";var p="https://js.stripe.com/v3",y=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var E=function(){for(var r=document.querySelectorAll('script[src^="'.concat(p,'"]')),e=0;e<r.length;e++){var o=r[e];if(y.test(o.src))return o}return null},d=function(r){var e="",o=document.createElement("script");o.src="".concat(p).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(o),o},g=function(r,e){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"3.4.1",startTime:e})},a=null,s=null,u=null,P=function(r){return function(){r(new Error("Failed to load Stripe.js"))}},L=function(r,e){return function(){window.Stripe?r(window.Stripe):e(new Error("Stripe.js not available"))}},_=function(r){return a!==null?a:(a=new Promise(function(e,o){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe){e(window.Stripe);return}try{var n=E();if(!(n&&r)){if(!n)n=d(r);else if(n&&u!==null&&s!==null){var i;n.removeEventListener("load",u),n.removeEventListener("error",s),(i=n.parentNode)===null||i===void 0||i.removeChild(n),n=d(r)}}u=L(e,o),s=P(o),n.addEventListener("load",u),n.addEventListener("error",s)}catch(h){o(h);return}}),a.catch(function(e){return a=null,Promise.reject(e)}))},b=function(r,e,o){if(r===null)return null;var n=r.apply(void 0,e);return g(n,o),n},c,m=!1,v=function(){return c||(c=_(null).catch(function(r){return c=null,Promise.reject(r)}),c)};Promise.resolve().then(function(){return v()}).catch(function(t){m||console.warn(t)});var C=function(){for(var r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];m=!0;var n=Date.now();return v().then(function(i){return b(i,e,n)})};let l=null;const I=()=>(l||(l=C("pk_live_51SD6NXIJBts2wisdy1ExsCAvJ4hpKT6JwNgC1eUHZVC9KDSWRyby1LPmewZRb9gOLoGJVicGJzSHn01VDHKyK2Tn00NaZXZ2Aa")),l),f=async t=>{try{const r=await S(),e=t==="remove_ads"?r.price_remove_ads:r.price_premium_phrases;if(!e.startsWith("price_"))throw console.error("El priceId no es válido para Stripe:",e),new Error("ID de precio inválido");return e}catch(r){throw console.error("Error obteniendo clave de producto:",r),new Error("No se pudo obtener el producto de Stripe")}},w=async t=>{try{const r=await I(),{error:e}=await r.redirectToCheckout({lineItems:[{price:t,quantity:1}],mode:"payment",successUrl:window.location.href,cancelUrl:window.location.href});if(e)throw console.error("Error redirigiendo a Stripe Checkout:",e),new Error(e.message)}catch(r){throw console.error("Error creando sesión de checkout:",r),new Error("No se pudo procesar el pago. Inténtalo más tarde.")}},R=async()=>{try{const t=await f("remove_ads");return await w(t),!0}catch(t){return console.error("Error procesando pago Remove Ads:",t),!1}},A=async()=>{try{const t=await f("premium_phrases");return await w(t),!0}catch(t){return console.error("Error procesando pago Premium:",t),!1}};export{w as createCheckoutSession,f as getProductKey,I as getStripe,A as handlePremiumPayment,R as handleRemoveAdsPayment};
//# sourceMappingURL=stripeService-DYTMT5Ef.js.map

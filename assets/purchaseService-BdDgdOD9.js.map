{"version":3,"file":"purchaseService-BdDgdOD9.js","sources":["../../services/purchaseService.ts"],"sourcesContent":["import { Capacitor } from '@capacitor/core';\n\n// Implementación real usando el plugin nativo de Capacitor\nexport const buyProduct = async (productId: string) => {\n  try {\n    console.log(\"Iniciando compra real del producto:\", productId);\n    \n    if (!Capacitor.isNativePlatform()) {\n      throw new Error(\"Las compras solo están disponibles en plataformas nativas\");\n    }\n    \n    // Usamos el plugin de Billing que hemos creado\n    // Accedemos al plugin usando registerPlugin en lugar de Plugins\n    const Billing = Capacitor.Plugins.Billing;\n    \n    // Llamamos al método purchase del plugin\n    const result = await Billing.purchase({ productId });\n    console.log(\"Resultado de compra:\", result);\n    \n    return {\n      productId: result.productId,\n      purchaseToken: result.purchaseToken\n    };\n  } catch (err) {\n    console.error(\"Error en compra real:\", err);\n    throw err; // Propagamos el error para manejarlo en la UI\n  }\n};\n\nexport const restorePurchases = async () => {\n  try {\n    console.log(\"Restaurando compras reales\");\n    \n    if (!Capacitor.isNativePlatform()) {\n      return { hasRemoveAds: false, hasPremium: false };\n    }\n    \n    // Usamos el plugin de Billing\n    // Accedemos al plugin usando Capacitor.Plugins\n    const Billing = Capacitor.Plugins.Billing;\n    \n    // Llamamos al método restorePurchases del plugin\n    const result = await Billing.restorePurchases();\n    console.log(\"Compras restauradas:\", result);\n    \n    // Verificamos si el usuario tiene alguno de los productos\n    const hasRemoveAds = result.purchases.some(p => p.productId === 'remove_ads');\n    const hasPremium = result.purchases.some(p => p.productId === 'premium_phrases');\n    \n    return { hasRemoveAds, hasPremium };\n  } catch (err) {\n    console.error(\"Error restaurando compras:\", err);\n    return { hasRemoveAds: false, hasPremium: false };\n  }\n};\n"],"names":["buyProduct","productId","Capacitor","result","err","restorePurchases","hasRemoveAds","p","hasPremium"],"mappings":"wCAGO,MAAMA,EAAa,MAAOC,GAAsB,CACrD,GAAI,CAGF,GAFA,QAAQ,IAAI,sCAAuCA,CAAS,EAExD,CAACC,EAAU,mBACb,MAAM,IAAI,MAAM,2DAA2D,EAQ7E,MAAMC,EAAS,MAHCD,EAAU,QAAQ,QAGL,SAAS,CAAE,UAAAD,EAAW,EACnD,eAAQ,IAAI,uBAAwBE,CAAM,EAEnC,CACL,UAAWA,EAAO,UAClB,cAAeA,EAAO,aAAA,CAE1B,OAASC,EAAK,CACZ,cAAQ,MAAM,wBAAyBA,CAAG,EACpCA,CACR,CACF,EAEaC,EAAmB,SAAY,CAC1C,GAAI,CAGF,GAFA,QAAQ,IAAI,4BAA4B,EAEpC,CAACH,EAAU,mBACb,MAAO,CAAE,aAAc,GAAO,WAAY,EAAA,EAQ5C,MAAMC,EAAS,MAHCD,EAAU,QAAQ,QAGL,iBAAA,EAC7B,QAAQ,IAAI,uBAAwBC,CAAM,EAG1C,MAAMG,EAAeH,EAAO,UAAU,KAAKI,GAAKA,EAAE,YAAc,YAAY,EACtEC,EAAaL,EAAO,UAAU,KAAKI,GAAKA,EAAE,YAAc,iBAAiB,EAE/E,MAAO,CAAE,aAAAD,EAAc,WAAAE,CAAA,CACzB,OAASJ,EAAK,CACZ,eAAQ,MAAM,6BAA8BA,CAAG,EACxC,CAAE,aAAc,GAAO,WAAY,EAAA,CAC5C,CACF"}